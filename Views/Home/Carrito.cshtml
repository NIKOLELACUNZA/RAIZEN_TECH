@model List<PRUEBA.Models.CART_ITEM>

@{
  ViewData["Title"] = "Carrito";
}

<h2 style="text-align: center;" class="m-5">@ViewData["Title"]</h2>

<div class="container">
  <div class="row">

    @foreach (var item in Model)
    {
      <div class="col-md-6">
        @if (item.Product != null)
        {
          <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
              <div class="col-md-4">
                <img src="@item.Product.Image_URL" alt="@item.Product.Name" class="img-fluid"
                  style="width: 100%; height: auto;">
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title">@item.Product.Name</h5>
                  <p class="card-text">@item.Product.Descripcion</p>
                  <div class="d-flex justify-content-between">
                    <span>Cantidad: @item.Quantity</span>
                    <span>Precio unitario: @item.Product.Price.ToString("C")</span>
                  </div>
                  <h6 class="mt-3">Subtotal: @((item.Product.Price * item.Quantity).ToString("C"))</h6>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    }
    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          Resumen del carrito
        </div>
        <div class="card-body">
          @{
            decimal total = 0;
            foreach (var item in Model)
            {
              if (item.Product != null)
              {
                total += item.Product.Price * item.Quantity;
              }
            }
          }
          <h5>Total: @(total.ToString("C"))</h5>
          <a href="#" class="btn btn-primary">Proceder al pago</a>
        </div>
      </div>
    </div>
  </div>
</div>