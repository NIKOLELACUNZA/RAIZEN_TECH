@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService
@model IEnumerable<PRODUCT>

<style>
.card {
    height: 400px;
    width: 300px;
    border-radius: 30px;
  }
  .container-catalogo .card-img-top {
    height: 200px;
    object-fit: cover;
  }
  .container-catalogo .bloque-flex {
    display: flex;
    flex-wrap: wrap;
    align-items: right;
    justify-content: flex-start;
    height: 30px;
  }
  .card-text1{
    padding-left: 5%;
  }
  .container-catalogo .card-text {
    padding: 0 !important;
    margin: 0 !important;
  }
  .card-img-top{
    padding: 20px;
  }
  .titulo{
    text-align: center;
    font-size: 50px;
    color: white;
  }
</style>

 <div class="container-catalogo">
  <h2 class="titulo">Lista de productos</h2>

  <div class="container">
    <div class="row">
      @foreach (var producto in Model)
      {
        <div class="col-sm-4">
          <div class="card product-card mb-4">
            <img src="@producto.Image_URL" class="card-img-top" alt="@producto.Name">
            <div class="card-body">
              <h5 class="card-title">@producto.Name</h5>
              <p class="card-text">@producto.Descripcion</p>
              <div class="bloque-flex">
                <p class="card-text">Precio: @producto.Price</p>
                <p class="card-text1">Cantidad: @producto.Quantity</p>
              </div>
              @if (User.IsInRole("Administrador"))
              {
                <a asp-action="Edit" asp-route-id="@producto.id" class="btn btn-primary">Editar</a>
                <a asp-action="Delete" asp-route-id="@producto.id" class="btn btn-danger">Eliminar</a>
              }
              @if (User.IsInRole("Cliente"))
              {
                <a asp-action="AddToCart" asp-route-id="@producto.id" class="btn btn-success">Añadir al carrito</a>
              }
            </div>
          </div>
        </div>
      }
    </div>
  </div>

  @if (User.IsInRole("Administrador"))
  {
    <p>
      <a asp-action="Create" class="btn btn-success">Agregar nuevo producto</a>
    </p>
  }
</div>
